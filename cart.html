
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="navbar">
        <h1>Shopping Cart</h1>
        <button class="category-buttons" onclick="goHome()">Home</button>
    </div>
    <div id="cartItems" class="cart"></div>
    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        function displayCart() {
            const cartItemsDiv = document.getElementById('cartItems');
            cartItemsDiv.innerHTML = '<h3></h3>';
            const cartItemsList = document.createElement('ul');
            cartItemsList.className = 'cart-items';
            cart.forEach(item => {
                const images = [item.image];
                if (item.second_image && item.second_image !== "empty") {
                    images.push(item.second_image);
                }
                let imageSliderHTML = '';
                imageSliderHTML = `
                    <div class="image-sliders">
                        ${images.map((src, index) => `<img src="${src}" class="slide ${index === 0 ? 'active' : ''}" alt="${item.title}">`).join('')}
                        </div>
                `;
                const cartItem = document.createElement('li');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-container">
                        ${imageSliderHTML}
                        <div class="cart-item-details">
                            <p class="title"><strong>${item.title}</strong></p>
                            <p class="vendor">${item.vendor}</p>
                            <p class="category"> ${item.product_type}</p>
                            <p class="price">Price: ${item.quantity > 0 ? item.price * item.quantity : item.price}</p>
                             <input type="number" class="num" value="${item.quantity || 1}" min="1" max="10" onchange="updateQuantity('${item.title}', this.value)">
                            <button class="category-button"onclick="removeFromCart('${item.title}')">Remove</button>
                            <button class="category-button"onclick="buyNow('${item.title}')">Buy Now</button>
                        </div>
                    </div>
                `;
                cartItemsList.appendChild(cartItem);
            });
            cartItemsDiv.appendChild(cartItemsList);
        }
        function addToCart(productTitle) {
            const product = allProducts.find(p => p.title === productTitle);
            const existingItem = cart.find(item => item.title === productTitle);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            displayCart();
        }
        function updateQuantity(productTitle, quantity) {
    
            cart = cart.map(item => {
                if (item.title === productTitle) {
                    item.quantity = quantity;
                }
                return item;
            });
            localStorage.setItem('cart', JSON.stringify(cart));
        }
      function removeFromCart(productTitle) {
    cart = cart.filter(item => item.title !== productTitle);
    localStorage.setItem('cart', JSON.stringify(cart));
    displayCart();
}


        function buyNow(productTitle) {
            const product = cart.find(p => p.title === productTitle);
            alert(`You bought ${product.title}!`);
            removeFromCart(productTitle);
        }
        function goHome() {
            window.location.href = 'index.html';
        }
        function updateQuantity(productTitle, quantity) {
            cart = cart.map(item => {
                if (item.title === productTitle) {
                    item.quantity = parseInt(quantity);
                }
                return item;
            });
            localStorage.setItem('cart', JSON.stringify(cart));
            displayCart();
        }
        
        
        function changeSlide(n, btn) {
            const slider = btn.parentElement;
            const slides = slider.getElementsByClassName('slide');
            let currentSlide = Array.from(slides).findIndex(slide => slide.classList.contains('active'));
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + n + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');
        }
        displayCart();
    </script>
</body>
</html>
